'use strict';

/* global require, module */

const { google } = require('googleapis');
const AuthClient = require('./client');
const analytics = google.analytics('v3');

class GA {
    constructor(options) {
        this._authClient = new AuthClient({
            key: options.key,
        });
    }

    view(reportProperties, callback) {
        this._authClient.auth(() => {
            analytics.data.ga.get(reportProperties, (err, gaData) => {
                if (err) {
                    console.log(`Error at accessing Google Analytics APIs: ${err}`);
                    return;
                }

                callback(gaData);
            });
        });
    }
}

module.exports = GA;
